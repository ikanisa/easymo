{
  "version": "6.3",
  "flow": {
    "name": "flow.vend.staff.v1",
    "screens": [
      {
        "id": "s_staff_list",
        "title": "Staff Numbers",
        "layout": {
          "type": "SingleColumnLayout",
          "children": [
            { "type": "TextCaption", "text": "${data.staff_text}" },
            {
              "type": "Form",
              "name": "form",
              "children": [
                {
                  "type": "EmbeddedLink",
                  "text": "Add",
                  "on-click-action": {
                    "name": "navigate",
                    "next": { "type": "screen", "name": "s_add_staff" }
                  }
                },
                {
                  "type": "EmbeddedLink",
                  "text": "Remove",
                  "on-click-action": {
                    "name": "navigate",
                    "next": { "type": "screen", "name": "s_remove_staff" }
                  }
                },
                {
                  "type": "Footer",
                  "label": "Refresh",
                  "on-click-action": {
                    "name": "data_exchange",
                    "payload": { "action_id": "a_staff_refresh" }
                  }
                }
              ]
            }
          ]
        }
      },
      {
        "id": "s_add_staff",
        "title": "Add Staff",
        "layout": {
          "type": "SingleColumnLayout",
          "children": [
            {
              "type": "Form",
              "name": "form",
              "children": [
                { "type": "TextInput", "name": "phone", "label": "WhatsApp number", "required": true },
                {
                  "type": "Dropdown",
                  "name": "role",
                  "label": "Role",
                  "required": true,
                  "data": [
                    { "id": "manager", "title": "Manager" },
                    { "id": "staff", "title": "Staff" }
                  ]
                },
                {
                  "type": "Footer",
                  "label": "Save",
                  "on-click-action": {
                    "name": "data_exchange",
                    "payload": {
                      "action_id": "a_staff_add",
                      "fields": {
                        "phone": "${form.phone}",
                        "role": "${form.role}"
                      }
                    }
                  }
                }
              ]
            }
          ]
        }
      },
      {
        "id": "s_remove_staff",
        "title": "Remove Staff",
        "layout": {
          "type": "SingleColumnLayout",
          "children": [
            {
              "type": "Form",
              "name": "form",
              "children": [
                {
                  "type": "Dropdown",
                  "name": "phone",
                  "label": "Number",
                  "required": true,
                  "data-source": "${data.staff_options}"
                },
                {
                  "type": "Footer",
                  "label": "Remove",
                  "on-click-action": {
                    "name": "data_exchange",
                    "payload": {
                      "action_id": "a_staff_remove",
                      "fields": {
                        "phone": "${form.phone}"
                      }
                    }
                  }
                }
              ]
            }
          ]
        }
      }
    ]
  }
}
