{
  "version": "6.4",
  "screens": [
    {
      "id": "s_orders_list",
      "title": "Your orders",
      "layout": { "type": "single_column" },
      "widgets": [
        {
          "type": "text_block",
          "id": "w_view_label",
          "text": "${data.view_label}"
        },
        {
          "type": "footer_buttons",
          "buttons": [
            {
              "id": "BTN_VIEW_OPEN",
              "title": "Open orders",
              "visibility_condition": "${data.view_mode} != 'open'",
              "action": {
                "type": "data_exchange",
                "id": "a_refresh_orders",
                "fields": { "view_mode": "open" }
              }
            },
            {
              "id": "BTN_VIEW_HISTORY",
              "title": "Order history",
              "visibility_condition": "${data.view_mode} != 'history'",
              "action": {
                "type": "data_exchange",
                "id": "a_refresh_orders",
                "fields": { "view_mode": "history" }
              }
            }
          ]
        },
        {
          "type": "radio_list",
          "id": "w_orders",
          "options_data_binding": "orders"
        },
        {
          "type": "footer_buttons",
          "buttons": [
            {
              "id": "BTN_PREV",
              "title": "Previous",
              "visibility_condition": "${data.page_token_prev} != null",
              "action": {
                "type": "data_exchange",
                "id": "a_refresh_orders",
                "fields": {
                  "view_mode": "${data.view_mode}",
                  "page_token": "${data.page_token_prev}"
                }
              }
            },
            {
              "id": "BTN_REFRESH",
              "title": "Refresh",
              "action": {
                "type": "data_exchange",
                "id": "a_refresh_orders",
                "fields": {
                  "view_mode": "${data.view_mode}",
                  "page_token": "${data.page_token_current}"
                }
              }
            },
            {
              "id": "BTN_NEXT",
              "title": "Next",
              "visibility_condition": "${data.page_token_next} != null",
              "action": {
                "type": "data_exchange",
                "id": "a_refresh_orders",
                "fields": {
                  "view_mode": "${data.view_mode}",
                  "page_token": "${data.page_token_next}"
                }
              }
            }
          ]
        }
      ],
      "events": {
        "on_item_select": {
          "widget_id": "w_orders",
          "action": {
            "type": "data_exchange",
            "id": "a_open_order",
            "fields": {
              "order_id": "${selected.id}",
              "view_mode": "${data.view_mode}"
            }
          }
        }
      }
    },
    {
      "id": "s_order_detail",
      "title": "Order detail",
      "layout": { "type": "single_column" },
      "widgets": [
        {
          "type": "text_block",
          "id": "w_order_header",
          "text": "${data.order_header_text}"
        },
        {
          "type": "text_block",
          "id": "w_order_summary",
          "text": "${data.summary_text}"
        },
        {
          "type": "text_block",
          "id": "w_order_timeline",
          "text": "${data.timeline_text}"
        },
        {
          "type": "text_block",
          "id": "w_reorder_hint",
          "text": "${data.reorder_hint}"
        },
        {
          "type": "footer_buttons",
          "buttons": [
            {
              "id": "BTN_DETAIL_REFRESH",
              "title": "Refresh",
              "action": {
                "type": "data_exchange",
                "id": "a_open_order",
                "fields": {
                  "order_id": "${data.order_id}",
                  "view_mode": "${data.view_mode}"
                }
              }
            },
            {
              "id": "BTN_ORDER_AGAIN",
              "title": "Order again",
              "visibility_condition": "${data.can_reorder} == 'true'",
              "action": {
                "type": "data_exchange",
                "id": "a_reorder_prompt",
                "fields": {
                  "order_id": "${data.order_id}",
                  "view_mode": "${data.view_mode}"
                }
              }
            },
            {
              "id": "BTN_DETAIL_BACK",
              "title": "Back",
              "action": { "type": "navigate", "next": "s_orders_list" }
            }
          ]
        }
      ]
    }
  ]
}
