{
  "version": "6.3",
  "screens": [
    {
      "id": "s_broadcast",
      "title": "Broadcast",
      "layout": { "type": "single_column" },
      "widgets": [
        {
          "type": "dropdown",
          "id": "template",
          "label": "Template",
          "options_data_binding": "template_options",
          "required": true
        },
        {
          "type": "dropdown",
          "id": "audience",
          "label": "Audience",
          "options": [
            { "id": "all_opted_in", "title": "All opted-in" },
            { "id": "recent_30d", "title": "Active â‰¤30d" },
            { "id": "top_promoters", "title": "Top promoters" }
          ]
        },
        {
          "type": "text_input",
          "id": "reason",
          "label": "Reason / body text",
          "placeholder": "Why are we sending this?"
        },
        {
          "type": "text_input",
          "id": "components_json",
          "label": "Components JSON (optional)",
          "placeholder": "[ { \"type\": \"body\", \"parameters\": [ ... ] } ]"
        },
        {
          "type": "text_block",
          "id": "w_template_summary",
          "text": "${data.selected_template.summary}"
        },
        {
          "type": "text_block",
          "id": "w_preview_summary",
          "text": "${data.preview_summary}"
        },
        {
          "type": "text_block",
          "id": "w_preview_components",
          "text": "${data.preview_components}"
        },
        {
          "type": "footer_buttons",
          "buttons": [
            {
              "id": "BTN_DESCRIBE",
              "title": "Describe",
              "action": {
                "type": "data_exchange",
                "id": "a_admin_broadcast_template",
                "fields": { "template": "${widgets.template.value}" }
              }
            },
            {
              "id": "BTN_PREVIEW",
              "title": "Preview",
              "action": {
                "type": "data_exchange",
                "id": "a_admin_broadcast_preview",
                "fields": {
                  "template": "${widgets.template.value}",
                  "audience": "${widgets.audience.value}",
                  "reason": "${widgets.reason.value}",
                  "components_json": "${widgets.components_json.value}"
                }
              }
            },
            {
              "id": "BTN_DRYRUN",
              "title": "Dry run",
              "action": {
                "type": "data_exchange",
                "id": "a_admin_broadcast_dryrun",
                "fields": {
                  "template": "${widgets.template.value}",
                  "audience": "${widgets.audience.value}",
                  "reason": "${widgets.reason.value}",
                  "components_json": "${widgets.components_json.value}"
                }
              }
            },
            {
              "id": "BTN_SEND",
              "title": "Send",
              "action": {
                "type": "data_exchange",
                "id": "a_admin_broadcast_send",
                "fields": {
                  "template": "${widgets.template.value}",
                  "audience": "${widgets.audience.value}",
                  "reason": "${widgets.reason.value}",
                  "components_json": "${widgets.components_json.value}"
                }
              }
            }
          ]
        }
      ]
    }
  ]
}
