# ═══════════════════════════════════════════════════════════════════════════════
# EASYMO ADMIN APP - ENVIRONMENT CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════
# Copy this file to .env.local for local development
# Configure these variables in Cloud Run / App Engine for production deployments
#
# ⚠️  SECURITY NOTICE:
# - NEVER commit .env.local to git
# - NEVER use NEXT_PUBLIC_* prefix for sensitive values (API keys, secrets)
# - Service role keys must ONLY be in server-side variables
#
# Legend:
#   [REQUIRED]  - Must be set for the application to function
#   [SENSITIVE] - Contains secrets, store in Secret Manager for production
#   [OPTIONAL]  - Has defaults or enables optional features
# ═══════════════════════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────────────────
# SUPABASE CONFIGURATION [REQUIRED] [SENSITIVE]
# ─────────────────────────────────────────────────────────────────────────────
# Get these from: Supabase Dashboard → Settings → API

# Public (client-side safe - exposed to browser)
NEXT_PUBLIC_SUPABASE_URL=https://your-project-ref.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key-here

# Server-only (NEVER use NEXT_PUBLIC_ prefix for these)
SUPABASE_URL=https://your-project-ref.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key-here

# ─────────────────────────────────────────────────────────────────────────────
# ADMIN AUTHENTICATION [REQUIRED] [SENSITIVE]
# ─────────────────────────────────────────────────────────────────────────────

# Admin API token for Edge Functions
EASYMO_ADMIN_TOKEN=your-admin-token-here

# Session secret (MINIMUM 32 characters for production)
# Generate with: openssl rand -hex 32
ADMIN_SESSION_SECRET=your-session-secret-min-32-characters-required

# Admin credentials (JSON array with bcrypt password hashes)
# Generate hash: node -e "const bcrypt = require('bcrypt'); bcrypt.hash('password', 10).then(console.log);"
# ADMIN_ACCESS_CREDENTIALS=[{"actorId":"uuid","email":"admin@example.com","passwordHash":"$2b$10$...","label":"Admin"}]

# Admin invite settings
ADMIN_INVITE_DEFAULT_ROLE=member
ADMIN_INVITE_EXPIRY_DAYS=14

# ─────────────────────────────────────────────────────────────────────────────
# WHATSAPP BUSINESS API [REQUIRED FOR MESSAGING] [SENSITIVE]
# ─────────────────────────────────────────────────────────────────────────────
# Meta WhatsApp Business API (NOT Twilio)
# Get from: Meta Business Suite → WhatsApp → Settings

# WhatsApp API credentials
WHATSAPP_ACCESS_TOKEN=your-permanent-access-token
WHATSAPP_PHONE_NUMBER_ID=your-phone-number-id
WHATSAPP_BUSINESS_ACCOUNT_ID=your-business-account-id

# WhatsApp send endpoint (server-side only)
WHATSAPP_SEND_ENDPOINT=https://your-supabase-project.supabase.co/functions/v1/wa-webhook-core

# Alternative format for compatibility
WA_TOKEN=your-permanent-access-token
WA_PHONE_ID=your-phone-number-id
WA_VERIFY_TOKEN=your-webhook-verify-token
WA_APP_SECRET=your-app-secret

# Template configuration
WHATSAPP_TEMPLATE_NAMESPACE=your-template-namespace
WA_TEMPLATE_LANG=en

# ─────────────────────────────────────────────────────────────────────────────
# AI PROVIDERS [OPTIONAL] [SENSITIVE]
# ─────────────────────────────────────────────────────────────────────────────
# Enable AI features (chat, agents, voice)

# OpenAI
OPENAI_API_KEY=sk-your-openai-api-key
OPENAI_ORG_ID=org-your-organization-id
ENABLE_OPENAI_REALTIME=false

# Google AI (Gemini)
GOOGLE_AI_API_KEY=AIza-your-google-ai-api-key
ENABLE_GEMINI_LIVE=false

# Google Maps
GOOGLE_MAPS_API_KEY=AIza-your-google-maps-api-key

# Google Search (for AI grounding)
GOOGLE_SEARCH_API_KEY=AIza-your-google-search-api-key
GOOGLE_SEARCH_ENGINE_ID=your-custom-search-engine-id
ENABLE_GOOGLE_SEARCH_GROUNDING=false

# Google Cloud
GOOGLE_CLOUD_PROJECT=your-gcp-project-id

# Image generation
ENABLE_IMAGE_GENERATION=false

# ─────────────────────────────────────────────────────────────────────────────
# MICROSERVICES [OPTIONAL]
# ─────────────────────────────────────────────────────────────────────────────
# Internal service URLs (can use NEXT_PUBLIC_ if services are client-accessible)

NEXT_PUBLIC_AGENT_CORE_URL=http://localhost:3001
NEXT_PUBLIC_VOICE_BRIDGE_API_URL=http://localhost:3002
NEXT_PUBLIC_MARKETPLACE_RANKING_URL=http://localhost:3003
NEXT_PUBLIC_MARKETPLACE_VENDOR_URL=http://localhost:3004
NEXT_PUBLIC_MARKETPLACE_BUYER_URL=http://localhost:3005
NEXT_PUBLIC_WALLET_SERVICE_URL=http://localhost:3006
NEXT_PUBLIC_INSURANCE_SERVICE_URL=http://localhost:3007

# ─────────────────────────────────────────────────────────────────────────────
# DEVELOPMENT & TESTING [OPTIONAL]
# ─────────────────────────────────────────────────────────────────────────────

# Enable mock data in development (NEVER set to true in production)
NEXT_PUBLIC_USE_MOCKS=false

# Enable UI Kit v2
NEXT_PUBLIC_UI_V2_ENABLED=false

# WhatsApp send timeouts
WHATSAPP_SEND_TIMEOUT_MS=10000
WHATSAPP_SEND_RETRIES=2

# ─────────────────────────────────────────────────────────────────────────────
# DEPLOYMENT PLATFORM VARIABLES
# ─────────────────────────────────────────────────────────────────────────────
# These are typically auto-set by the platform

# Netlify (auto-set during builds)
# NETLIFY=true
# CONTEXT=production|deploy-preview|branch-deploy
# URL=https://your-site.netlify.app
# DEPLOY_URL=https://deploy-preview-123--your-site.netlify.app

# Cloud Run / App Engine
# PORT=8080 (auto-set by Cloud Run)
# K_SERVICE=service-name (auto-set by Cloud Run)
# GOOGLE_CLOUD_PROJECT=project-id (auto-set in GCP environments)
