feat: implement location caching system and fix mobility matching

## PHASE 1: Location Caching Infrastructure ✅

### Database Changes (Migration 20251209180000):
- Created RPC functions for location caching:
  * save_recent_location() - Save location with 30-min TTL
  * get_recent_location() - Get valid recent location
  * has_recent_location() - Check if recent location exists
  * save_favorite_location() - Save persistent favorites
  * get_saved_location() - Get favorite by label
  * list_saved_locations() - List all user favorites
  
- Created backward-compatibility RPCs:
  * update_user_location_cache() - Alias for existing code
  * get_cached_location() - Alias for existing code

- Created saved_locations table:
  * For persistent favorites (home, work, gym, etc.)
  * RLS policies for user access control
  * Geospatial indexes for performance
  * Auto-updated timestamps

### Edge Function Changes:
- Created _shared/wa-webhook-shared/locations/request-location.ts:
  * requestLocationWithCache() - Unified entry point for all workflows
  * saveSharedLocation() - Save after user shares location
  * handleUseLastLocation() - Handle "Use Last Location" button click
  * saveFavoriteLocation() - Save home/work locations
  * listFavoriteLocations() - List user's saved locations
  
- Updated _shared/wa-webhook-shared/locations/messages.ts:
  * Added getShareLocationPrompt(locale, hasRecentLocation)
  * Added getUseLastLocationButton(locale)
  * Added getLocationReusedMessage(ageMinutes, locale)
  * Multi-language support (English, French, Kinyarwanda)

- Fixed wa-webhook-property/handlers/location-handler.ts:
  * Replaced non-existent user_location_cache table reference
  * Now uses get_recent_location() RPC function
  * Standardized cache checking logic

## PHASE 2: Fix Mobility Matching Column Names ✅

### Column Name Standardization:
- Fixed wa-webhook-mobility/handlers/driver_response.ts:
  * Changed pickup_latitude/longitude → pickup_lat/lng
  * Changed dropoff_latitude/longitude → dropoff_lat/lng
  * Updated distance calculation to use correct columns
  
- Fixed _shared/tool-executor.ts:
  * Changed pickup_latitude/longitude → pickup_lat/lng
  * Consistent with trips table schema

### Impact:
- Fixes "column does not exist" errors in mobility matching
- All code now uses SHORT column names consistently
- Matches database schema and RPC functions

## PHASE 3: Backend Ready for "Use Last Location" Button ⏸

### Implemented (Backend):
✅ RPC functions for retrieving last location
✅ Button definitions in messages module
✅ Handler function handleUseLastLocation()
✅ Age tracking and validation
✅ Multi-language support

### TODO (Frontend Integration):
- Integrate button in mobility workflow (nearby.ts)
- Integrate button in jobs workflow
- Integrate button in property workflow
- Test end-to-end flow

## Duplication Eliminated:

### Location Caching - Consolidated 3 Systems → 1:
BEFORE:
- recent_locations table (existed, no helpers)
- user_location_cache table (referenced but didn't exist) ❌
- profiles.metadata (ad-hoc approach) ⚠️

AFTER:
- recent_locations table + RPC helpers ✅
- saved_locations table for favorites ✅
- Standardized request-location.ts module ✅

### Location Messages - Unified:
BEFORE: Each service had own prompts
AFTER: Single source in _shared/wa-webhook-shared/locations/messages.ts

### Column Names - Standardized:
BEFORE: pickup_lat, pickup_latitude, pickup_lon, pickup_longitude
AFTER: pickup_lat, pickup_lng only

## Testing:

Deploy with:
```bash
chmod +x deploy-location-caching.sh
./deploy-location-caching.sh
```

Verify:
- Location sharing saves to recent_locations table
- Cache auto-used within 30 minutes
- Mobility matching returns results (no column errors)
- Property search uses cached location
- Jobs search uses cached location

## Documentation:

See LOCATION_CACHING_IMPLEMENTATION_COMPLETE.md for:
- Full implementation details
- API documentation
- Integration examples
- Testing checklist
- Next steps

## Resolves:

- Location caching broken (non-existent tables/RPCs)
- Mobility matching failures ("column p.whatsapp_number does not exist")
- Column name mismatches in trips table queries
- Inconsistent location prompts across services
- No "Use Last Location" functionality

## Files Changed:

Created:
- supabase/migrations/20251209180000_fix_location_caching_functions.sql
- supabase/functions/_shared/wa-webhook-shared/locations/request-location.ts
- LOCATION_CACHING_IMPLEMENTATION_COMPLETE.md
- deploy-location-caching.sh

Modified:
- supabase/functions/_shared/wa-webhook-shared/locations/messages.ts
- supabase/functions/wa-webhook-property/handlers/location-handler.ts
- supabase/functions/wa-webhook-mobility/handlers/driver_response.ts
- supabase/functions/_shared/tool-executor.ts

Archived:
- supabase/migrations/20251209030000_consolidate_mobility_tables.sql.old
