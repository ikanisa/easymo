# EasyMO environment configuration (Phase 2 baseline)
# Copy this file to `.env.local` (or export via Vercel) and replace every
# CHANGEME_ placeholder with the correct secret before running locally.

## Supabase project (non-secret)
VITE_SUPABASE_PROJECT_ID="lhbowpbcpwoiparwnwgt"
VITE_SUPABASE_URL="https://lhbowpbcpwoiparwnwgt.supabase.co"
VITE_API_BASE="${VITE_SUPABASE_URL}/functions/v1"
SUPABASE_URL="${VITE_SUPABASE_URL}"
SUPABASE_FUNCTIONS_URL="${VITE_API_BASE}"

## Supabase keys
VITE_SUPABASE_ANON_KEY="CHANGEME_SUPABASE_ANON_KEY"
VITE_SUPABASE_SERVICE_ROLE_KEY="CHANGEME_SUPABASE_SERVICE_ROLE_KEY"
SUPABASE_SERVICE_ROLE_KEY="${VITE_SUPABASE_SERVICE_ROLE_KEY}"
SERVICE_ROLE_KEY="${VITE_SUPABASE_SERVICE_ROLE_KEY}"
SUPABASE_ANON_KEY="${VITE_SUPABASE_ANON_KEY}"

## Admin API / session tokens
VITE_ADMIN_TOKEN="CHANGEME_ADMIN_EDGE_TOKEN"
EASYMO_ADMIN_TOKEN="${VITE_ADMIN_TOKEN}"
ADMIN_TOKEN="${VITE_ADMIN_TOKEN}"
ADMIN_SESSION_SECRET="CHANGEME_SESSION_SECRET_AT_LEAST_16_CHARS"
ADMIN_SESSION_MAX_AGE_DAYS="30"
ADMIN_SESSION_TTL_SECONDS="43200"
ADMIN_ACCESS_CREDENTIALS='[{"actorId":"CHANGEME-ACTOR-ID","token":"CHANGEME-OPERATOR-TOKEN","label":"Ops"}]'
ADMIN_FLOW_WA_ID="CHANGEME_ADMIN_WA_ID"
ADMIN_ACCESS_TOKENS='[]'
ADMIN_ALLOW_ANY_ACTOR="false"
ADMIN_DEFAULT_ACTOR_ID="00000000-0000-0000-0000-000000000001"
ADMIN_TEST_ACTOR_ID="00000000-0000-0000-0000-000000000001"
NEXT_PUBLIC_DEFAULT_ACTOR_ID="00000000-0000-0000-0000-000000000001"
ADMIN_SESSION_SECRET_FALLBACK=""
ADMIN_SESSION_COOKIE_NAME="admin_session"

## Public client config
NEXT_PUBLIC_SUPABASE_URL="${VITE_SUPABASE_URL}"
NEXT_PUBLIC_SUPABASE_ANON_KEY="${VITE_SUPABASE_ANON_KEY}"
NEXT_PUBLIC_USE_MOCKS="false"
VITE_ENABLE_AGENT_CHAT="false"
NEXT_PUBLIC_ENVIRONMENT_LABEL="Staging"
NEXT_PUBLIC_ASSISTANT_ENABLED="false"

## Feature toggles (Edge functions)
ENABLE_AGENT_CHAT="false"
FEATURE_AGENT_CHAT="0"
FEATURE_AGENT_COLLECTPAYMENT="0"
FEATURE_AGENT_WARMTRANSFER="0"
FEATURE_MARKETPLACE_RANKING="0"
FEATURE_MARKETPLACE_VENDOR="0"
FEATURE_MARKETPLACE_BUYER="0"
FEATURE_WALLET_SERVICE="0"
DUAL_CONSTRAINT_MATCHING_ENABLED="false"
BASKET_CONFIRMATION_ENABLED="false"
FEATURE_FLAG_DUALCONSTRAINTMATCHING_ENABLED="0"
FEATURE_FLAG_BASKET_CONFIRMATION_ENABLED="0"
NEXT_PUBLIC_BASKET_CONFIRMATION_ENABLED="false"
NEXT_PUBLIC_DUAL_CONSTRAINT_MATCHING_ENABLED="false"

## Dispatcher / function endpoints
DISPATCHER_FUNCTION_URL="${VITE_API_BASE}/campaign-dispatch"
NEXT_PUBLIC_CAMPAIGN_DISPATCHER_ENDPOINT="${DISPATCHER_FUNCTION_URL}"
INTERNAL_API_BASE_URL="${DISPATCHER_FUNCTION_URL}"
EASYMO_ADMIN_API_BASE="${VITE_API_BASE}"
EASYMO_ADMIN_API_TOKEN="${EASYMO_ADMIN_TOKEN}"

## WhatsApp / Meta credentials
WA_PHONE_ID="CHANGEME_WA_PHONE_ID"
WA_TOKEN="CHANGEME_WA_TOKEN"
WA_APP_SECRET="CHANGEME_WA_APP_SECRET"
WA_VERIFY_TOKEN="CHANGEME_WA_VERIFY_TOKEN"
WA_BOT_NUMBER_E164="+2507XXXXXXX"
META_WABA_BUSINESS_ID="CHANGEME_WABA_BUSINESS_ID"
WHATSAPP_SEND_ENDPOINT="https://example.com/whatsapp/send"
WHATSAPP_SEND_TIMEOUT_MS="10000"
WHATSAPP_SEND_RETRIES="2"
WHATSAPP_ACCESS_TOKEN="CHANGEME_WHATSAPP_ACCESS_TOKEN"
WHATSAPP_API_URL="https://graph.facebook.com/v20.0"
WHATSAPP_API_TOKEN="${WHATSAPP_ACCESS_TOKEN}"
WHATSAPP_API_BASE_URL="https://graph.facebook.com/v20.0"
WHATSAPP_PHONE_NUMBER_ID="${WA_PHONE_ID}"
WHATSAPP_TEMPLATE_DEFAULT_LANGUAGE="en"
WHATSAPP_SYSTEM_USER_ID=""
WHATSAPP_TEMPLATE_NAMESPACE=""
NEXT_PUBLIC_WHATSAPP_SEND_ENDPOINT="${WHATSAPP_SEND_ENDPOINT}"
NEXT_PUBLIC_WHATSAPP_SEND_API="${WHATSAPP_SEND_ENDPOINT}"

## Reminder / notification toggles
CART_REMINDER_CRON_ENABLED="true"
CART_REMINDER_CRON="*/10 * * * *"
CART_REMINDER_MINUTES="20"
CART_REMINDER_LANGUAGE="en"
CART_REMINDER_BATCH_SIZE="25"

ORDER_PENDING_REMINDER_CRON_ENABLED="true"
ORDER_PENDING_REMINDER_CRON="*/5 * * * *"
ORDER_PENDING_REMINDER_MINUTES="15"
ORDER_PENDING_REMINDER_LANGUAGE="en"
ORDER_PENDING_REMINDER_BATCH_SIZE="25"

BASKETS_REMINDER_CRON_ENABLED="false"
BASKETS_REMINDER_BATCH_SIZE="20"
BASKETS_REMINDER_MAX_PER_HOUR="30"

NOTIFICATION_WORKER_CRON_ENABLED="false"
NOTIFY_MAX_RETRIES="5"
NOTIFY_DEFAULT_DELAY_SECONDS="0"
NOTIFY_BACKOFF_BASE_SECONDS="30"
NOTIFY_MAX_BACKOFF_SECONDS="900"
NOTIFY_WORKER_LEASE_SECONDS="180"

## Storage buckets & signed URLs
MENU_MEDIA_BUCKET="menu-source-files"
KYC_STORAGE_BUCKET="kyc-documents"
INSURANCE_MEDIA_BUCKET="insurance-docs"
OCR_RESULT_BUCKET="ocr-json-cache"
INSURANCE_OCR_METRICS_WEBHOOK_URL="CHANGEME_INSURANCE_WEBHOOK"
INSURANCE_OCR_METRICS_TOKEN="CHANGEME_INSURANCE_OCR_TOKEN"
KYC_SIGNED_URL_TTL_SECONDS="604800"

## OpenAI / OCR limits
OPENAI_API_KEY="CHANGEME_OPENAI_API_KEY"
OPENAI_BASE_URL="https://api.openai.com/v1"
OPENAI_AGENT_ID=""
OPENAI_REALTIME_URL="wss://api.openai.com/v1/realtime?model=gpt-4o-realtime-preview"
OPENAI_REALTIME_API_KEY="${OPENAI_API_KEY}"
OPENAI_VISION_MODEL="gpt-4o-mini"
OCR_MAX_ATTEMPTS="3"
OCR_MAX_MENU_CATEGORIES="50"
OCR_MAX_MENU_ITEMS="500"
OCR_QUEUE_SCAN_LIMIT="5"

## Miscellaneous
QR_SALT="CHANGEME_QR_SALT"
IN_PRODUCTION="false"
CORS_ALLOWED_ORIGINS="http://localhost:5173"
ALERT_WEBHOOK_URL="https://example.com/alerts"
DEEPLINK_BASE_URL="https://links.easymo.example"
DEEPLINK_SIGNING_SECRET="CHANGEME_DEEPLINK_SECRET"
DEEPLINK_ALLOWED_ORIGINS="https://easymo.example"
DEEPLINKS_PUBLIC_BUCKET="deeplinks-public"
WA_INBOUND_LOG_SAMPLE_RATE="0.05"
WA_INBOUND_SNAPSHOT_LIMIT_BYTES="500000"
FLOW_DATA_CHANNEL_TOKEN=""
FLOW_ENCRYPTION_PRIVATE_KEY=""
FLOW_ENCRYPTION_PUBLIC_KEY=""
INSURANCE_ADMIN_TEMPLATE="insurance_admin_review"
INSURANCE_ADMIN_TEMPLATE_LANG="en"
INSURANCE_TEMPLATE_VENDOR="insurance_vendor_update"
HEALTH_URL="${VITE_API_BASE}/admin-health"
ADMIN_BASE_URL="https://admin.easymo.example"
ADMIN_API_TOKEN="${EASYMO_ADMIN_TOKEN}"
SUPABASE_API_BASE="${VITE_API_BASE}"
WHATSAPP_API_BASE_URL="https://graph.facebook.com/v20.0"
VOUCHERS_BUCKET="vouchers"
BASKET_DEEPLINK_BASE_URL="https://links.easymo.example/basket"
NEXT_PUBLIC_BASKET_DEEPLINK_BASE_URL="${BASKET_DEEPLINK_BASE_URL}"
NEXT_PUBLIC_VOUCHER_PREVIEW_ENDPOINT=""
NEXT_PUBLIC_STORAGE_HEALTHCHECK_BUCKET=""
BRIDGE_SHARED_SECRET="CHANGEME_BRIDGE_SECRET"
QR_TOKEN_SECRET="CHANGEME_QR_SECRET"
QR_TOKEN_TTL_SECONDS="172800"

## GitHub Synthetic checks (GitHub Actions Secrets recommended)
ADMIN_BASE_URL_CHECK="https://admin.easymo.example"
ADMIN_API_TOKEN_CHECK="${EASYMO_ADMIN_TOKEN}"
SUPABASE_API_BASE_CHECK="${SUPABASE_API_BASE}"


# Optional: expose service key for Supabase CLI tasks (not required in Vercel)
SUPABASE_SERVICE_ROLE_KEY="${VITE_SUPABASE_SERVICE_ROLE_KEY}"
SUPABASE_DB_URL="postgresql://postgres:CHANGEME_PASSWORD@db.lhbowpbcpwoiparwnwgt.supabase.co:5432/postgres"
SUPABASE_JWT_SECRET="CHANGEME_SUPABASE_JWT_SECRET"

# Supabase function specific (Deno) overrides
INSURANCE_OCR_METRICS_WEBHOOK_URL="https://example.com/ocr-metrics"
INSURANCE_OCR_METRICS_TOKEN="CHANGEME_OCR_TOKEN"
MOMO_ALLOCATOR_BATCH_SIZE="10"
MOMO_ALLOCATOR_REQUIRE_TXN_ID="true"
MOMO_ALLOCATOR_MIN_CONFIDENCE="0.6"
MOMO_SMS_ALLOWED_IPS=""
MOMO_SMS_DEFAULT_SOURCE="EASYMO"
MOMO_SMS_HMAC_SECRET="CHANGEME_MOMO_HMAC"
TEMPLATE_ORDER_CREATED_VENDOR="order_created_vendor"
TEMPLATE_ORDER_PENDING_VENDOR="order_pending_vendor"
TEMPLATE_ORDER_PAID_CUSTOMER="order_paid_customer"
TEMPLATE_ORDER_SERVED_CUSTOMER="order_served_customer"
TEMPLATE_ORDER_CANCELLED_CUSTOMER="order_cancelled_customer"
TEMPLATE_CART_REMINDER_CUSTOMER="cart_reminder_customer"

# Admin panel additional endpoints
NEXT_PUBLIC_APP_URL="https://admin.easymo.example"
INTERNAL_API_BASE_URL="${VITE_API_BASE}"

# Phase 4/5 service endpoints
AGENT_CORE_URL="http://localhost:4000"
AGENT_CORE_INTERNAL_TOKEN="internal-admin-token"
AGENT_INTERNAL_TENANT_ID="a4a8cf2d-0a4f-446c-8bf2-28509641158f"
VOICE_BRIDGE_API_URL="http://localhost:4100"
WALLET_SERVICE_URL="http://localhost:4400"
MARKETPLACE_RANKING_URL="http://localhost:4500"
MARKETPLACE_VENDOR_URL="http://localhost:4600"
MARKETPLACE_BUYER_URL="http://localhost:4700"

## Observability
LOG_DRAIN_URL="https://example.com/logs"
METRICS_DRAIN_URL="https://example.com/metrics"
SENTRY_DSN="https://public@sentry.example/1"
SENTRY_ENVIRONMENT="development"
NEXT_PUBLIC_SENTRY_DSN="https://public@sentry.example/1"
