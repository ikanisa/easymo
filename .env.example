# EasyMO environment template (production-ready baseline)
# Copy to `.env`, `.env.local`, or your deployment secret manager and replace
# every CHANGEME_* value before running in any environment.

## Supabase project (non-secret)
VITE_SUPABASE_PROJECT_ID=lhbowpbcpwoiparwnwgt
VITE_SUPABASE_URL=https://lhbowpbcpwoiparwnwgt.supabase.co
VITE_API_BASE=${VITE_SUPABASE_URL}/functions/v1
SUPABASE_URL=${VITE_SUPABASE_URL}
SUPABASE_FUNCTIONS_URL=${VITE_API_BASE}

## Supabase keys
VITE_SUPABASE_ANON_KEY=CHANGEME_SUPABASE_ANON_KEY
VITE_SUPABASE_SERVICE_ROLE_KEY=CHANGEME_SUPABASE_SERVICE_ROLE_KEY
SUPABASE_SERVICE_ROLE_KEY=${VITE_SUPABASE_SERVICE_ROLE_KEY}
SERVICE_ROLE_KEY=${VITE_SUPABASE_SERVICE_ROLE_KEY}
SUPABASE_ANON_KEY=${VITE_SUPABASE_ANON_KEY}
WA_SUPABASE_SERVICE_ROLE_KEY=${VITE_SUPABASE_SERVICE_ROLE_KEY}

## Admin API / session tokens
VITE_ADMIN_TOKEN=CHANGEME_ADMIN_EDGE_TOKEN
EASYMO_ADMIN_TOKEN=${VITE_ADMIN_TOKEN}
ADMIN_TOKEN=${VITE_ADMIN_TOKEN}
ADMIN_SESSION_SECRET=CHANGEME_SESSION_SECRET_AT_LEAST_16_CHARS
ADMIN_SESSION_MAX_AGE_DAYS=30
ADMIN_SESSION_TTL_SECONDS=43200
ADMIN_ACCESS_CREDENTIALS='[{"actorId":"CHANGEME-ACTOR-ID","token":"CHANGEME-OPERATOR-TOKEN","label":"Ops"}]'
ADMIN_FLOW_WA_ID=CHANGEME_ADMIN_WA_ID
ADMIN_ACCESS_TOKENS='[]'
ADMIN_ALLOW_ANY_ACTOR=false
ADMIN_DEFAULT_ACTOR_ID=00000000-0000-0000-0000-000000000001
ADMIN_TEST_ACTOR_ID=00000000-0000-0000-0000-000000000001
NEXT_PUBLIC_DEFAULT_ACTOR_ID=${ADMIN_DEFAULT_ACTOR_ID}
ADMIN_SESSION_SECRET_FALLBACK=
ADMIN_SESSION_COOKIE_NAME=admin_session

## Public client config
NEXT_PUBLIC_SUPABASE_URL=${VITE_SUPABASE_URL}
NEXT_PUBLIC_SUPABASE_ANON_KEY=${VITE_SUPABASE_ANON_KEY}
NEXT_PUBLIC_USE_MOCKS=false
VITE_ENABLE_AGENT_CHAT=false
NEXT_PUBLIC_ENVIRONMENT_LABEL=Staging
NEXT_PUBLIC_ASSISTANT_ENABLED=false

## Feature toggles
ENABLE_AGENT_CHAT=false
FEATURE_AGENT_CHAT=0
FEATURE_AGENT_WEB_SEARCH=0
FEATURE_AGENT_COLLECTPAYMENT=0
FEATURE_AGENT_WARMTRANSFER=0
FEATURE_MARKETPLACE_RANKING=0
FEATURE_MARKETPLACE_VENDOR=0
FEATURE_MARKETPLACE_BUYER=0
FEATURE_WALLET_SERVICE=0
DUAL_CONSTRAINT_MATCHING_ENABLED=false
BASKET_CONFIRMATION_ENABLED=false
FEATURE_FLAG_DUALCONSTRAINTMATCHING_ENABLED=0
FEATURE_FLAG_BASKET_CONFIRMATION_ENABLED=0
NEXT_PUBLIC_BASKET_CONFIRMATION_ENABLED=false
NEXT_PUBLIC_DUAL_CONSTRAINT_MATCHING_ENABLED=false

## Dispatcher / function endpoints
DISPATCHER_FUNCTION_URL=${VITE_API_BASE}/campaign-dispatch
NEXT_PUBLIC_CAMPAIGN_DISPATCHER_ENDPOINT=${DISPATCHER_FUNCTION_URL}
INTERNAL_API_BASE_URL=${DISPATCHER_FUNCTION_URL}
EASYMO_ADMIN_API_BASE=${VITE_API_BASE}
EASYMO_ADMIN_API_TOKEN=${EASYMO_ADMIN_TOKEN}

## WhatsApp / Meta credentials
WA_PHONE_ID=CHANGEME_WA_PHONE_ID
WA_TOKEN=CHANGEME_WA_TOKEN
WA_APP_SECRET=CHANGEME_WA_APP_SECRET
WA_VERIFY_TOKEN=CHANGEME_WA_VERIFY_TOKEN
WA_BOT_NUMBER_E164=+2507XXXXXXX
META_WABA_BUSINESS_ID=CHANGEME_WABA_BUSINESS_ID
WHATSAPP_SEND_ENDPOINT=https://CHANGEME_WHATSAPP_SENDER_ENDPOINT
WHATSAPP_SEND_TIMEOUT_MS=10000
WHATSAPP_SEND_RETRIES=2
WHATSAPP_ACCESS_TOKEN=CHANGEME_WHATSAPP_ACCESS_TOKEN
WHATSAPP_API_URL=https://graph.facebook.com/v20.0
WHATSAPP_API_TOKEN=${WHATSAPP_ACCESS_TOKEN}
WHATSAPP_API_BASE_URL=${WHATSAPP_API_URL}
WHATSAPP_PHONE_NUMBER_ID=${WA_PHONE_ID}
WHATSAPP_TEMPLATE_DEFAULT_LANGUAGE=en
WHATSAPP_SYSTEM_USER_ID=
WHATSAPP_TEMPLATE_NAMESPACE=
WA_WEBHOOK_MAX_BYTES=262144
WA_HTTP_TIMEOUT_MS=10000
WA_HTTP_MAX_RETRIES=1
WA_HTTP_RETRY_DELAY_MS=200
WA_HTTP_STATUS_RETRIES=2
WA_HTTP_STATUS_RETRY_DELAY_MS=400
WA_INBOUND_LOG_SAMPLE_RATE=0
WA_INBOUND_DEBUG_SNAPSHOT=false
WA_EVENTS_TTL_DAYS=30
WA_WEBHOOK_LOGS_TTL_DAYS=14
WA_RETENTION_INTERVAL_MS=21600000
WA_ALLOWED_MSISDN_PREFIXES=
NEXT_PUBLIC_WHATSAPP_SEND_ENDPOINT=${WHATSAPP_SEND_ENDPOINT}
NEXT_PUBLIC_WHATSAPP_SEND_API=${WHATSAPP_SEND_ENDPOINT}

## Reminder / notification toggles
CART_REMINDER_CRON_ENABLED=true
CART_REMINDER_CRON=*/10 * * * *
CART_REMINDER_MINUTES=20
CART_REMINDER_LANGUAGE=en
CART_REMINDER_BATCH_SIZE=25

ORDER_PENDING_REMINDER_CRON_ENABLED=true
ORDER_PENDING_REMINDER_CRON=*/5 * * * *
ORDER_PENDING_REMINDER_MINUTES=15
ORDER_PENDING_REMINDER_LANGUAGE=en
ORDER_PENDING_REMINDER_BATCH_SIZE=25

BASKETS_REMINDER_CRON_ENABLED=false
BASKETS_REMINDER_BATCH_SIZE=20
BASKETS_REMINDER_MAX_PER_HOUR=30

NOTIFICATION_WORKER_CRON_ENABLED=false
NOTIFY_MAX_RETRIES=5
NOTIFY_DEFAULT_DELAY_SECONDS=0
NOTIFY_BACKOFF_BASE_SECONDS=30
NOTIFY_MAX_BACKOFF_SECONDS=900
NOTIFY_WORKER_LEASE_SECONDS=180

## Storage buckets & signed URLs
MENU_MEDIA_BUCKET=menu-source-files
KYC_STORAGE_BUCKET=kyc-documents
INSURANCE_MEDIA_BUCKET=insurance-docs
OCR_RESULT_BUCKET=ocr-json-cache
INSURANCE_OCR_METRICS_WEBHOOK_URL=CHANGEME_INSURANCE_WEBHOOK
INSURANCE_OCR_METRICS_TOKEN=CHANGEME_INSURANCE_OCR_TOKEN
KYC_SIGNED_URL_TTL_SECONDS=604800

## OpenAI / OCR
OPENAI_API_KEY=CHANGEME_OPENAI_API_KEY
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_AGENT_ID=
OPENAI_REALTIME_URL=wss://api.openai.com/v1/realtime?model=gpt-4o-realtime-preview
OPENAI_REALTIME_API_KEY=${OPENAI_API_KEY}
OPENAI_VISION_MODEL=gpt-4o-mini
OPENAI_RETRIEVAL_VECTOR_STORE_ID=
VITE_OPENAI_VECTOR_STORE_ID=
OCR_MAX_ATTEMPTS=3
OCR_MAX_MENU_CATEGORIES=50
OCR_MAX_MENU_ITEMS=500
OCR_QUEUE_SCAN_LIMIT=5
WEB_SEARCH_ENABLED=0
WEB_SEARCH_ALLOWED_DOMAINS=
WEB_SEARCH_INCLUDE_SOURCES=1
WEB_SEARCH_LOCATION_COUNTRY=
WEB_SEARCH_LOCATION_CITY=
WEB_SEARCH_LOCATION_REGION=
WEB_SEARCH_LOCATION_TIMEZONE=

## Miscellaneous
QR_SALT=CHANGEME_QR_SALT
IN_PRODUCTION=false
CORS_ALLOWED_ORIGINS=https://admin.easymo.example
ALERT_WEBHOOK_URL=https://CHANGEME_ALERT_WEBHOOK
ALERT_WEBHOOK_TIMEOUT_MS=5000
DEEPLINK_BASE_URL=https://links.easymo.example
DEEPLINK_SIGNING_SECRET=CHANGEME_DEEPLINK_SECRET
DEEPLINK_ALLOWED_ORIGINS=https://admin.easymo.example
DEEPLINKS_PUBLIC_BUCKET=deeplinks-public
WA_INBOUND_LOG_SAMPLE_RATE=0.05
WA_INBOUND_SNAPSHOT_LIMIT_BYTES=500000
FLOW_DATA_CHANNEL_TOKEN=
FLOW_ENCRYPTION_PRIVATE_KEY=
FLOW_ENCRYPTION_PUBLIC_KEY=
INSURANCE_ADMIN_TEMPLATE=insurance_admin_review
INSURANCE_ADMIN_TEMPLATE_LANG=en
INSURANCE_TEMPLATE_VENDOR=insurance_vendor_update
HEALTH_URL=${VITE_API_BASE}/admin-health
ADMIN_BASE_URL=https://admin.easymo.example
ADMIN_API_TOKEN=${EASYMO_ADMIN_TOKEN}
SUPABASE_API_BASE=${VITE_API_BASE}
VOUCHERS_BUCKET=vouchers
BASKET_DEEPLINK_BASE_URL=${DEEPLINK_BASE_URL}/basket
NEXT_PUBLIC_BASKET_DEEPLINK_BASE_URL=${BASKET_DEEPLINK_BASE_URL}
NEXT_PUBLIC_VOUCHER_PREVIEW_ENDPOINT=
NEXT_PUBLIC_STORAGE_HEALTHCHECK_BUCKET=
BRIDGE_SHARED_SECRET=CHANGEME_BRIDGE_SECRET
QR_TOKEN_SECRET=CHANGEME_QR_SECRET
QR_TOKEN_TTL_SECONDS=172800

## GitHub Synthetic Checks (store as repo secrets)
ADMIN_BASE_URL_CHECK=https://admin.easymo.example
ADMIN_API_TOKEN_CHECK=${EASYMO_ADMIN_TOKEN}
SUPABASE_API_BASE_CHECK=${SUPABASE_API_BASE}

# Optional: Supabase CLI access
SUPABASE_DB_URL=postgresql://postgres:CHANGEME_PASSWORD@db.lhbowpbcpwoiparwnwgt.supabase.co:5432/postgres
SUPABASE_JWT_SECRET=CHANGEME_SUPABASE_JWT_SECRET

# Supabase function overrides
INSURANCE_OCR_METRICS_WEBHOOK_URL=https://CHANGEME_INSURANCE_WEBHOOK
INSURANCE_OCR_METRICS_TOKEN=CHANGEME_INSURANCE_OCR_TOKEN
MOMO_ALLOCATOR_BATCH_SIZE=10
MOMO_ALLOCATOR_REQUIRE_TXN_ID=true
MOMO_ALLOCATOR_MIN_CONFIDENCE=0.6
MOMO_SMS_ALLOWED_IPS=
MOMO_SMS_DEFAULT_SOURCE=EASYMO
MOMO_SMS_HMAC_SECRET=CHANGEME_MOMO_HMAC
TEMPLATE_ORDER_CREATED_VENDOR=order_created_vendor
TEMPLATE_ORDER_PENDING_VENDOR=order_pending_vendor
TEMPLATE_ORDER_PAID_CUSTOMER=order_paid_customer
TEMPLATE_ORDER_SERVED_CUSTOMER=order_served_customer
TEMPLATE_ORDER_CANCELLED_CUSTOMER=order_cancelled_customer
TEMPLATE_CART_REMINDER_CUSTOMER=cart_reminder_customer

# Admin panel extras
NEXT_PUBLIC_APP_URL=https://admin.easymo.example

# Phase 4/5 service endpoints
AGENT_CORE_URL=http://localhost:4000
AGENT_CORE_INTERNAL_TOKEN=internal-admin-token
AGENT_INTERNAL_TENANT_ID=a4a8cf2d-0a4f-446c-8bf2-28509641158f
VOICE_BRIDGE_API_URL=http://localhost:4100
WALLET_SERVICE_URL=http://localhost:4400
MARKETPLACE_RANKING_URL=http://localhost:4500
MARKETPLACE_VENDOR_URL=http://localhost:4600
MARKETPLACE_BUYER_URL=http://localhost:4700

## Observability
LOG_DRAIN_URL=https://CHANGEME_LOG_DRAIN
METRICS_DRAIN_URL=https://CHANGEME_METRICS_DRAIN
SENTRY_DSN=https://public@sentry.example/1
SENTRY_ENVIRONMENT=production
NEXT_PUBLIC_SENTRY_DSN=${SENTRY_DSN}

# --- Service-specific envs (reference from ./services/*/.env.example) ---
# Agent-Core service
# PORT=4000
# LOG_LEVEL=info
# DATABASE_URL=postgresql://postgres:postgres@localhost:5432/agent_core
# REDIS_URL=redis://localhost:6379
# KAFKA_BROKERS=localhost:29092
# JWT_PUBLIC_KEY=-----BEGIN PUBLIC KEY-----\\nCHANGEME\\n-----END PUBLIC KEY-----
# FEATURE_AGENT_CHAT=1
# FEATURE_AGENT_WEB_SEARCH=0
# FEATURE_AGENT_COLLECTPAYMENT=0
# FEATURE_AGENT_WARMTRANSFER=0
# OPENAI_API_KEY=${OPENAI_API_KEY}
# OPENAI_AGENT_ID=
# OPENAI_BASE_URL=${OPENAI_BASE_URL}

# Voice-Bridge
# PORT=4100
# LOG_LEVEL=info
# TWILIO_MEDIA_AUTH_TOKEN=CHANGEME_TWILIO_TOKEN
# OPENAI_REALTIME_URL=${OPENAI_REALTIME_URL}
# OPENAI_REALTIME_API_KEY=${OPENAI_REALTIME_API_KEY}
# KAFKA_BROKERS=localhost:29092
# KAFKA_CLIENT_ID=voice-bridge
# REDIS_URL=redis://localhost:6379
# COMPLIANCE_PROMPT=This call may be monitored for quality.
# OPT_OUT_PATTERN=\\b(STOP|END|CANCEL|QUIT)\\b
# CONTACT_TOPIC=voice.contact.events
# MEDIA_TOPIC=voice.media.events

# WhatsApp Bot
# PORT=4300
# LOG_LEVEL=info
# META_VERIFY_TOKEN=CHANGEME_VERIFY
# META_PAGE_TOKEN=CHANGEME_PAGE_TOKEN
# KAFKA_BROKERS=localhost:29092
# KAFKA_CLIENT_ID=whatsapp-bot
# INBOUND_TOPIC=whatsapp.inbound
# OUTBOUND_TOPIC=whatsapp.outbound
# REDIS_URL=redis://localhost:6379
# OPT_OUT_PATTERN=\\bSTOP\\b

# Ranking Service
# PORT=4500
# LOG_LEVEL=info
# DEFAULT_TENANT_ID=${AGENT_INTERNAL_TENANT_ID}
# EASYMO_ADMIN_API_BASE=${VITE_API_BASE}
# EASYMO_ADMIN_TOKEN=${EASYMO_ADMIN_TOKEN}
# FEATURE_MARKETPLACE_RANKING=1
# DATABASE_URL=postgresql://postgres:postgres@localhost:5432/agent_core

# Wallet Service
# PORT=4400
# LOG_LEVEL=info
# DEFAULT_TENANT_ID=${AGENT_INTERNAL_TENANT_ID}
# COMMISSION_ACCOUNT_ID=c6e2c9b9-0b32-46e8-90d6-1b3edc1820f8
# PLATFORM_ACCOUNT_ID=5c8c42d7-9b5a-4f2a-a730-1b15219a0b3b
# FEATURE_WALLET_SERVICE=1
# DATABASE_URL=postgresql://postgres:postgres@localhost:5432/agent_core

# Vendor Service
# PORT=4600
# LOG_LEVEL=info
# DEFAULT_TENANT_ID=${AGENT_INTERNAL_TENANT_ID}
# FEATURE_MARKETPLACE_VENDOR=1
# DATABASE_URL=postgresql://postgres:postgres@localhost:5432/agent_core

# Buyer Service
# PORT=4700
# LOG_LEVEL=info
# DEFAULT_TENANT_ID=${AGENT_INTERNAL_TENANT_ID}
# WALLET_SERVICE_URL=http://localhost:4400
# FEATURE_MARKETPLACE_BUYER=1
# DATABASE_URL=postgresql://postgres:postgres@localhost:5432/agent_core
# EASYMO_ADMIN_API_BASE=${VITE_API_BASE}
# EASYMO_ADMIN_TOKEN=${EASYMO_ADMIN_TOKEN}

# SIP Ingress
# PORT=4200
# LOG_LEVEL=info
# KAFKA_BROKERS=localhost:29092
# KAFKA_CLIENT_ID=sip-ingress
# EVENT_TOPIC=voice.sip.events
# CONTACT_TOPIC=voice.contact.events
# REDIS_URL=redis://localhost:6379
# SIGNATURE_SECRET=CHANGEME_SIP_SIGNATURE

# Broker Orchestrator
# LOG_LEVEL=info
# KAFKA_BROKERS=localhost:29092
# KAFKA_CLIENT_ID=broker-orchestrator
# WHATSAPP_TOPIC=whatsapp.inbound
# VOICE_CONTACT_TOPIC=voice.contact.events
# SIP_TOPIC=voice.sip.events
# BROKER_OUTBOUND_TOPIC=broker.outbound
# RETRY_TOPIC=broker.retry
# REDIS_URL=redis://localhost:6379
# AGENT_CORE_URL=http://localhost:4000
# WALLET_SERVICE_URL=http://localhost:4400
# WALLET_API_KEY=CHANGEME_WALLET_API_KEY
