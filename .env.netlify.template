# Environment Variables Template for Netlify
# Copy this to Netlify Dashboard → Site Settings → Environment Variables
# Last Updated: 2025-11-29

# ============================================
# PUBLIC VARIABLES (NEXT_PUBLIC_*)
# Safe for client-side exposure
# ============================================

NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your-anon-key

# Environment identifier
NEXT_PUBLIC_ENV=production
NEXT_PUBLIC_UI_V2_ENABLED=true
NEXT_PUBLIC_USE_MOCKS=false

# Feature flags (public)
NEXT_PUBLIC_FEATURE_MARKETPLACE=true
NEXT_PUBLIC_FEATURE_VOICE_AGENTS=true
NEXT_PUBLIC_FEATURE_IMAGE_GEN=true
NEXT_PUBLIC_ENABLE_GOOGLE_SEARCH=true
NEXT_PUBLIC_ENABLE_REALTIME_VOICE=true

# Analytics
NEXT_PUBLIC_SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# ============================================
# SERVER-ONLY VARIABLES (NO NEXT_PUBLIC_ PREFIX!)
# CRITICAL: These must NEVER have NEXT_PUBLIC_ prefix
# ============================================

# Supabase (Server)
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your-service-role-key

# Admin Authentication
EASYMO_ADMIN_TOKEN=your-secure-admin-token-min-32-chars
ADMIN_SESSION_SECRET=your-session-secret-min-32-chars-random

# OpenAI
OPENAI_API_KEY=sk-proj-your-api-key
OPENAI_ORG_ID=org-your-org-id

# Google AI Platform
GOOGLE_AI_API_KEY=AIzaSy-your-api-key
GOOGLE_CLOUD_PROJECT=easymo-prod

# Google Maps Platform
GOOGLE_MAPS_API_KEY=AIzaSy-your-maps-api-key

# Google Custom Search
GOOGLE_SEARCH_API_KEY=AIzaSy-your-search-api-key
GOOGLE_SEARCH_ENGINE_ID=your-search-engine-id

# Database (Prisma - Agent Core)
DATABASE_URL=postgresql://user:password@host:5432/database

# Redis (Optional - for caching)
REDIS_URL=redis://default:password@host:6379

# Kafka (Optional - for microservices)
KAFKA_BROKERS=localhost:19092,localhost:29092

# Feature Flags (Server)
ENABLE_OPENAI_REALTIME=true
ENABLE_GEMINI_LIVE=true
ENABLE_IMAGE_GENERATION=true
ENABLE_GOOGLE_SEARCH_GROUNDING=true

# Sentry (Server)
SENTRY_AUTH_TOKEN=your-sentry-auth-token
SENTRY_ORG=your-org
SENTRY_PROJECT=easymo-admin

# ============================================
# BUILD-TIME VARIABLES
# Used during Netlify build process
# ============================================

NODE_VERSION=20.18.0
PNPM_VERSION=10.18.3
NODE_ENV=production
NEXT_TELEMETRY_DISABLED=1
NETLIFY_CACHE_NEXTJS=true

# ============================================
# CONTEXT-SPECIFIC OVERRIDES
# ============================================

# Production context (main branch)
# Use production API keys and endpoints

# Deploy Preview context (pull requests)
# Can use development/staging API keys:
# OPENAI_API_KEY=sk-proj-dev-key (set per context in Netlify)
# GOOGLE_AI_API_KEY=AIzaSy-dev-key (set per context in Netlify)

# Branch Deploy context (staging branch)
# Use staging API keys

# ============================================
# SECURITY CHECKLIST
# ============================================

# ✅ DO:
# - Use NEXT_PUBLIC_ prefix ONLY for truly public data
# - Store secrets in Netlify dashboard (not in .env files)
# - Use different API keys for production vs preview deployments
# - Rotate keys regularly
# - Enable IP restrictions on API keys where possible

# ❌ DON'T:
# - Never use NEXT_PUBLIC_SUPABASE_SERVICE_ROLE_KEY
# - Never use NEXT_PUBLIC_OPENAI_API_KEY
# - Never use NEXT_PUBLIC_ADMIN_TOKEN
# - Never commit .env files with real secrets to git
# - Never share service role keys in client code

# ============================================
# VALIDATION
# ============================================

# Before deploying, run:
# node ./scripts/assert-no-service-role-in-client.mjs
# This will fail the build if server secrets are in NEXT_PUBLIC_* variables

# ============================================
# NOTES
# ============================================

# 1. All values above are placeholders - replace with actual values
# 2. Set these in Netlify Dashboard, not in .env files
# 3. Use context-specific values for dev/staging/production
# 4. Supabase secrets are stored in Supabase Vault for edge functions
# 5. Netlify Functions can access all server-side env vars
# 6. Next.js API routes can access all server-side env vars
# 7. Client-side code can ONLY access NEXT_PUBLIC_* variables
